# PixLog 主面板 PRD - 数据看板设计
> 📅 版本：v1.0 | 日期：2026-01-18

---

## 一、产品背景与目标

### 1.1 背景
当前 PixLog 通过菜单栏 Popover 展示数据，受限于 320×500 像素的空间，无法呈现深度分析。用户需要一个**独立的全尺寸窗口**来查看详细的统计数据、趋势变化、行为洞察。

### 1.2 目标
打造一个**"专注力数据中心"**，让用户：
- 📊 **量化效率**：通过数据了解自己的工作模式
- 🔍 **发现规律**：找到黄金工作时段、识别干扰源
- 📈 **追踪成长**：长期趋势对比，见证进步
- 🎯 **优化行为**：基于数据做出改变

---

## 二、功能发散清单

> 💡 以下是完整的功能发散，分为 8 大类别，共计 **60+ 个功能点**

---

### 📊 类别 A：核心数据指标

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| A1 | 今日专注时长 | 实时显示今日在主力应用上的总时长 | 最核心指标 |
| A2 | 今日专注率 | 专注时长 ÷ 屏幕亮屏时间 | 衡量效率 |
| A3 | 今日总使用时长 | 所有应用的使用时长总和 | 了解屏幕时间 |
| A4 | 今日应用切换次数 | 从 A 切到 B 算一次 | 量化碎片化程度 |
| A5 | 今日被打断次数 | 从主力应用切到非主力，再切回主力 | 量化干扰 |
| A6 | 平均每次专注时长 | 每次连续使用主力应用的平均时长 | 深度工作能力 |
| A7 | 最长连续专注 | 今天最长的一次不间断专注 | 成就感 |
| A8 | 当前连续专注 | 实时：你已经连续专注 X 分钟了 | 激励继续 |

---

### ⏰ 类别 B：时间模式分析

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| B1 | 24 小时专注分布 | 柱状图：每小时的专注时长 | 找到黄金时段 |
| B2 | 时段专注热力图 | 7天×24小时 = 168格热力图 | 发现周规律 |
| B3 | 工作开始时间 | 每天第一次使用主力应用的时间 | 作息追踪 |
| B4 | 工作结束时间 | 每天最后一次使用主力应用的时间 | 加班检测 |
| B5 | 午休时长 | 12:00-14:00 无主力应用使用的时长 | 休息检测 |
| B6 | 早起鸟/夜猫子 | 6-9点 vs 22-2点 的专注占比 | 类型判定 |
| B7 | 工作日 vs 周末 | 两种模式的专注时长对比 | 生活平衡 |
| B8 | 每日专注曲线 | 折线图：24小时专注趋势 | 精细分析 |
| B9 | 高效时段推荐 | 基于历史数据，推荐你的黄金时间 | AI 洞察 |
| B10 | 低效时段提醒 | "你在 15:00-16:00 经常分心" | 改进建议 |

---

### 📈 类别 C：趋势与对比

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| C1 | 日趋势图 | 过去 7/14/30 天的专注时长折线 | 短期趋势 |
| C2 | 周趋势图 | 过去 4/8/12 周的周专注时长 | 中期趋势 |
| C3 | 月趋势图 | 过去 6/12 个月的月专注时长 | 长期趋势 |
| C4 | 年度总览 | 全年 365 天热力图 | 年度回顾 |
| C5 | 本周 vs 上周 | 专注时长变化百分比、排名变化 | 即时反馈 |
| C6 | 本月 vs 上月 | 月度对比 | 月度复盘 |
| C7 | 同比去年 | 今年 X 月 vs 去年 X 月 | 年度成长 |
| C8 | 环比增长率 | 连续 N 期的增长/下降趋势 | 动量判断 |
| C9 | 滚动平均 | 7 日/30 日移动平均线 | 平滑波动 |
| C10 | 趋势预测 | 基于当前趋势，预测本月总专注 | 目标导向 |

---

### 🏆 类别 D：排行榜

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| D1 | 应用使用排行 | Top 10 应用按时长排序 | 了解时间分配 |
| D2 | 主力应用排行 | 仅主力应用的排行 | 专注分布 |
| D3 | 浏览器域名排行 | 你在哪些网站花时间最多 | 网络时间分析 |
| D4 | 每日冠军应用 | 每天使用时间最长的应用 | 趣味统计 |
| D5 | 连续称霸天数 | 某应用连续 N 天是使用最多的 | 成就系统 |
| D6 | 新晋应用 | 本周开始使用的新软件 | 发现变化 |
| D7 | 退役应用 | 过去常用但最近不再用的 | 习惯变迁 |
| D8 | 增长最快应用 | 本周 vs 上周使用增长最多的 | 趋势发现 |
| D9 | 下降最多应用 | 本周 vs 上周使用下降最多的 | 流失追踪 |
| D10 | 时段冠军 | 上午/下午/晚上各自的 Top 应用 | 时段偏好 |

---

### 🚨 类别 E：干扰与分心分析

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| E1 | 打断来源排行 | 哪些应用最常打断你的专注 | 识别干扰源 |
| E2 | 打断时长分析 | 每次被打断后平均分心多久 | 量化损失 |
| E3 | 打断时段分布 | 哪些时段被打断最多 | 防护时段 |
| E4 | 社交应用时长 | 微信/飞书/Slack 等的使用时长 | 沟通成本 |
| E5 | 娱乐应用时长 | B站/YouTube/Netflix 等 | 娱乐占比 |
| E6 | 切换频率曲线 | 每小时的应用切换次数 | 识别混乱时段 |
| E7 | 深度工作比例 | 连续专注>30min 的时长占比 | 深度 vs 浅度 |
| E8 | 碎片时间分析 | <5min 的短会话占比 | 碎片化程度 |
| E9 | 上下文切换成本 | 估算：打断次数 × 恢复时间 | 量化损失 |
| E10 | 专注保护建议 | "建议 10:00-12:00 关闭微信通知" | 行动指南 |

---

### 🎯 类别 F：目标与成就

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| F1 | 每日专注目标 | 设定目标：今天专注 4 小时 | 目标驱动 |
| F2 | 目标完成进度 | 进度条：已完成 68% | 实时反馈 |
| F3 | 连续达标天数 | 连续 N 天完成目标（打卡） | 习惯养成 |
| F4 | 本周目标 | 周度目标设定 | 周计划 |
| F5 | 月度里程碑 | 本月累计专注 100 小时 | 成就感 |
| F6 | 个人最佳记录 | 单日/周/月最高专注时长 | 突破自我 |
| F7 | 成就徽章 | 首次专注 8 小时、连续 30 天等 | 游戏化 |
| F8 | 等级系统 | 累计专注时长升级：新手→专家 | 长期激励 |
| F9 | 排行对比 | 与平台平均水平比较 | 社交激励 |
| F10 | 年度报告 | 年度专注总结（类似支付宝年报） | 仪式感 |

---

### 🔬 类别 G：深度分析

| #   | 功能点     | 描述                 | 价值   |
| --- | ------- | ------------------ | ---- |
| G1  | 应用使用时间线 | 时间轴：今天的应用切换历史      | 复盘一天 |
| G2  | 会话详情列表  | 每个使用会话的开始/结束/时长    | 精细数据 |
| G3  | 应用生命周期  | 某应用从开始使用到现在的曲线     | 习惯变迁 |
| G4  | 周几效率对比  | 周一到周日的专注时长对比       | 发现规律 |
| G5  | 季节性分析   | Q1-Q4 的专注趋势        | 季度复盘 |
| G6  | 事件标记    | 手动标记"今天开会多"解释异常    | 上下文  |
| G7  | 异常检测    | 自动识别异常低效的日期        | 智能提醒 |
| G8  | 相关性分析   | 专注时长 vs 切换次数的关系    | 数据洞察 |
| G9  | 日历热力图   | 日历视图 + 热力图着色       | 直观展示 |
| G10 | 数据导出    | 导出 CSV/JSON/PDF 报告 | 数据自主 |

---

### ⚙️ 类别 H：设置与配置

| # | 功能点 | 描述 | 价值 |
|---|--------|------|------|
| H1 | 主力应用管理 | 添加/删除/编辑主力应用 | 核心配置 |
| H2 | 浏览器域名管理 | 选择哪些网站算专注 | 细粒度控制 |
| H3 | 应用分类 | 工作/学习/娱乐/社交 标签 | 分类统计 |
| H4 | 目标设置 | 设定每日/周/月目标 | 目标管理 |
| H5 | 通知设置 | 达标提醒、久坐提醒等 | 通知偏好 |
| H6 | 数据备份 | iCloud 同步（未来） | 数据安全 |
| H7 | 隐私模式 | 隐藏敏感应用名称 | 隐私保护 |
| H8 | 闲置阈值 | 自定义多久算闲置（默认 5 分钟） | 个性化 |
| H9 | 工作时间定义 | 设置工作日、工作时段 | 场景区分 |
| H10 | 主题设置 | 深色/浅色模式 | 视觉偏好 |

---

## 三、Tab 分类设计

基于以上功能，规划 **5 个主要 Tab**：

```
┌─────────────────────────────────────────────────────────────────┐
│  [📊 总览]  [📈 趋势]  [🏆 排行]  [🔍 详情]  [⚙️ 设置]          │
└─────────────────────────────────────────────────────────────────┘
```

### Tab 设计逻辑

| Tab       | 定位          | 时间范围        | 核心问题        |
| --------- | ----------- | ----------- | ----------- |
| 📊 **总览** | 今日快照 + 近期趋势 | 今日 + 过去 7 天 | "今天/本周怎么样？" |
| 📈 **趋势** | 长期变化追踪      | 周/月/年       | "我在进步吗？"    |
| 🏆 **排行** | 应用使用排名      | 可选时间范围      | "时间花在哪了？"   |
| 🔍 **详情** | 精细数据挖掘      | 单日/时间线      | "具体发生了什么？"  |
| ⚙️ **设置** | 配置管理        | -           | "如何自定义？"    |

---

## 四、各 Tab 详细设计

---

### 📊 Tab 1：总览 (Today & This Week)

> 💡 目标：30 秒内让用户了解今天和本周的整体状态

#### 布局设计

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 总览                                     🔄 刷新  ▼ 今日    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │  专注时长    │  │  专注率     │  │  被打断次数  │              │
│  │   4h 32m    │  │    68%     │  │     8 次    │              │
│  │   ↑12%      │  │   ↑5%      │  │    ↓3 次    │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  🔥 当前状态：你已连续专注 47 分钟 (Cursor)                   ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌───────────────────────────┐  ┌───────────────────────────┐   │
│  │  📊 今日 24 小时分布        │  │  📈 本周趋势 (柱状图)      │   │
│  │  ▁▂▃█████▇▅▃▂▁▁▁▃▆████▃▁  │  │   ╷    ╷                  │   │
│  │  6  8  10 12 14 16 18 20 22│  │  ██   ██ ██    ██ ██     │   │
│  │   发现: 10:00-12:00 是黄金时段│  │  周一 二  三 四  五       │   │
│  └───────────────────────────┘  └───────────────────────────┘   │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  🏆 今日 Top 3 应用                                        │  │
│  │  ┌──────┬────────────────────────────────────┬───────┐    │  │
│  │  │ 🔵   │  Cursor                       ████████ │ 2h 15m│    │  │
│  │  │ 🟢   │  Chrome - GitHub              ████    │ 1h 02m│    │  │
│  │  │ 🟣   │  Figma                        ███     │ 45m   │    │  │
│  │  └──────┴────────────────────────────────────┴───────┘    │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────┐  ┌───────────────────────────┐   │
│  │  🚨 打断分析                │  │  🎯 今日目标               │   │
│  │  Top 干扰源:               │  │  ████████████░░░  68%     │   │
│  │  1. 微信 (5次, 共12min)    │  │  目标: 6h | 已完成: 4h 5m │   │
│  │  2. 飞书 (2次, 共8min)     │  │                          │   │
│  │  3. 邮件 (1次, 共3min)     │  │  🔥 再专注 1h 55m 即可达标 │   │
│  └───────────────────────────┘  └───────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 包含功能
- A1-A8：核心数据指标
- B1：24 小时专注分布
- B9：黄金时段推荐
- C1：7 天趋势
- D1：Today Top 应用
- E1-E3：打断分析
- F1-F2：目标进度

---

### 📈 Tab 2：趋势 (Trends)

> 💡 目标：追踪长期变化，发现进步或退步

#### 布局设计

```
┌─────────────────────────────────────────────────────────────────┐
│  📈 趋势                            ▼ 过去 30 天  │ 导出 CSV    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 时间范围选择 ──────────────────────────────────────────────┐ │
│  │  [7天] [14天] [30天] [3个月] [6个月] [1年] [自定义...]       │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  📊 专注时长趋势                                             ││
│  │                                    ╭──────╮                  ││
│  │                              ╭─────╯      ╰───╮              ││
│  │           ╭─────╮     ╭─────╯                 ╰───╮          ││
│  │     ╭─────╯     ╰─────╯                           ╰────      ││
│  │  ───╯                                                        ││
│  │  1/1  1/5  1/10  1/15  1/20  1/25  1/30                      ││
│  │                                                              ││
│  │  ── 实际值   ╌╌ 7日移动平均   ▪▪ 目标线 (4h/天)               ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌──── 趋势摘要 ─────────────────────────────────────────────┐  │
│  │                                                            │  │
│  │  📈 本月专注总计        vs 上月      环比      日均         │  │
│  │     87h 32m            75h 10m     ↑16%     2h 55m        │  │
│  │                                                            │  │
│  │  🎯 预测本月完成        最佳单日     最差单日               │  │
│  │     105h (按当前趋势)   5h 20m      0h 45m                 │  │
│  │                        (1月15日)   (1月3日周末)            │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────┐  ┌───────────────────────────┐   │
│  │  📅 周几效率对比            │  │  🕐 时段分布热力图          │   │
│  │                            │  │                            │   │
│  │   周一 ████████  3.2h      │  │  时段 一 二 三 四 五 六 日  │   │
│  │   周二 ████████  3.1h      │  │   6   ▫ ▫ ▫ ▫ ▫ ▫ ▫      │   │
│  │   周三 ██████████ 4.0h     │  │   8   ▪ ▪ ▪ ▪ ▫ ▫ ▫      │   │
│  │   周四 ████████  3.3h      │  │  10   █ █ █ █ ▪ ▫ ▫      │   │
│  │   周五 ██████    2.4h      │  │  12   ▪ ▪ ▪ ▪ ▪ ▫ ▫      │   │
│  │   周六 ████      1.5h      │  │  14   █ █ ▪ █ ▪ ▫ ▫      │   │
│  │   周日 ██        0.8h      │  │  16   ▪ ▪ ▪ ▪ ▪ ▫ ▫      │   │
│  │                            │  │  18   ▫ ▫ ▫ ▫ ▫ ▫ ▫      │   │
│  │   💡 周三是你最高效的一天    │  │  20   ▪ ▪ ▪ ▫ ▫ ▫ ▫      │   │
│  └───────────────────────────┘  │  22   ▫ ▫ ▫ ▫ ▫ ▫ ▫      │   │
│                                 │                            │   │
│                                 │  🔥 周三上午 10:00 是黄金时段│   │
│                                 └───────────────────────────┘   │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  📊 年度热力图 (365 天)                                     │  │
│  │  ▫▫▪▪██▪▪▫▫▪██████▪▪▫▫▪▪████▪▪▫▫▫▪▪▪████▪▪▫...            │  │
│  │  Jan    Feb    Mar    Apr    May    Jun    Jul ...         │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 包含功能
- C1-C10：所有趋势对比功能
- B2、B7：时段热力图、工作日/周末对比
- G4、G5：周几对比、季节性分析

---

### 🏆 Tab 3：排行 (Rankings)

> 💡 目标：了解时间都花在哪些应用上

#### 布局设计

```
┌─────────────────────────────────────────────────────────────────┐
│  🏆 排行                        ▼ 本周  │ 仅主力应用 ☑          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 时间范围 ──────────────────────────────────────────────────┐│
│  │  [今日] [本周] [本月] [本年] [全部时间]                       ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  📊 应用使用排行榜                                          │  │
│  │                                                            │  │
│  │  排名   应用                   时长          占比   变化    │  │
│  │  ─────────────────────────────────────────────────────────│  │
│  │  🥇 1   Cursor               12h 45m        32%   ↑2      │  │
│  │  🥈 2   Chrome               10h 20m        26%   ─       │  │
│  │  🥉 3   Figma                 6h 30m        16%   ↑1      │  │
│  │     4   VS Code               4h 15m        11%   ↓2      │  │
│  │     5   Notion                2h 50m         7%   NEW     │  │
│  │     6   微信                   1h 40m         4%   ↓1      │  │
│  │     7   邮件                   1h 10m         3%   ─       │  │
│  │     8   Slack                   45m          2%   ─       │  │
│  │                                                            │  │
│  │  [展开查看更多...]                                          │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────┐  ┌───────────────────────────┐   │
│  │  🌐 浏览器域名排行          │  │  📈 变化最大的应用         │   │
│  │                            │  │                            │   │
│  │  1. github.com   3h 20m    │  │  📈 增长最快:               │   │
│  │  2. stackoverflow 2h 10m   │  │     Notion ↑180% (vs上周)  │   │
│  │  3. developer.apple 1h 40m │  │     Cursor ↑45%            │   │
│  │  4. chatgpt.com   1h 20m   │  │                            │   │
│  │  5. figma.com     1h 05m   │  │  📉 下降最多:               │   │
│  │                            │  │     VS Code ↓30%           │   │
│  │  [点击查看完整域名报告]      │  │     微信 ↓25%              │   │
│  └───────────────────────────┘  └───────────────────────────┘   │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  🏅 本周每日冠军                                            │  │
│  │                                                            │  │
│  │    一        二        三        四        五              │  │
│  │  ┌────┐   ┌────┐   ┌────┐   ┌────┐   ┌────┐              │  │
│  │  │Cursor│  │Cursor│  │Figma │  │Cursor│  │Chrome│              │  │
│  │  │3h 20m│  │4h 10m│  │2h 50m│  │3h 45m│  │2h 30m│              │  │
│  │  └────┘   └────┘   └────┘   └────┘   └────┘              │  │
│  │                                                            │  │
│  │  🎖️ Cursor 本周称霸 3 天！                                  │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────┐  ┌───────────────────────────┐   │
│  │  🆕 新晋应用                │  │  👋 退役应用               │   │
│  │                            │  │                            │   │
│  │  本周开始使用:              │  │  过去常用，最近消失:        │   │
│  │  ├─ Notion (1月15日)       │  │  ├─ Sketch (上次: 12月)    │   │
│  │  ├─ Arc Browser (1月14日)  │  │  ├─ Evernote (上次: 11月)  │   │
│  │  └─ Linear (1月13日)       │  │  └─ Bear (上次: 10月)      │   │
│  └───────────────────────────┘  └───────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 包含功能
- D1-D10：所有排行榜功能
- E4-E5：社交/娱乐应用分类

---

### 🔍 Tab 4：详情 (Details)

> 💡 目标：精细查看单日数据、浏览时间线

#### 布局设计

```
┌─────────────────────────────────────────────────────────────────┐
│  🔍 详情                           📅 1月17日 周五              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 日期选择 ──────────────────────────────────────────────────┐│
│  │  [◀ 前一天]   1月17日 星期五   [后一天 ▶]   [📅 日历选择]     ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌──── 当日概览 ───────────────────────────────────────────────┐│
│  │  专注时长: 4h 32m    专注率: 68%    切换: 47次   打断: 8次   ││
│  │  开始: 09:12        结束: 22:45     屏幕时间: 6h 40m         ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  📊 时间线视图                               [切换: 列表视图] ││
│  │                                                              ││
│  │  09:00  ██████ Cursor (09:12-10:45, 1h33m)                  ││
│  │  10:00  ─────────────────────────────                       ││
│  │         ██ 微信 (10:45-10:52, 7min) ← 打断                   ││
│  │         █████ Cursor (10:52-11:30, 38min)                   ││
│  │  11:00  ─────────────────────────────                       ││
│  │         ████████ Chrome-GitHub (11:30-12:15, 45min)         ││
│  │  12:00  ─────────────────────────────                       ││
│  │         ░░░░░░ [午休 12:15-13:30]                            ││
│  │  13:00  ─────────────────────────────                       ││
│  │         ██████████ Cursor (13:30-15:20, 1h50m) 🔥最长连续    ││
│  │  14:00  ─────────────────────────────                       ││
│  │  15:00  ─────────────────────────────                       ││
│  │         ███ Figma (15:20-15:55, 35min)                      ││
│  │         ███████ Cursor (16:00-17:15, 1h15m)                 ││
│  │  ...                                                        ││
│  │                                                              ││
│  │  🎨 颜色: █ 主力应用  ░ 非活动  ■ 非主力应用                   ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  📋 会话列表 (47 个)                      [筛选: 全部 ▼]     │  │
│  │                                                            │  │
│  │  时间          应用                时长     类型            │  │
│  │  ─────────────────────────────────────────────────────────│  │
│  │  09:12-10:45   Cursor             1h 33m    主力 ✓         │  │
│  │  10:45-10:52   微信                  7m    打断 ⚠️         │  │
│  │  10:52-11:30   Cursor               38m    主力 ✓         │  │
│  │  11:30-12:15   Chrome-GitHub        45m    主力 ✓         │  │
│  │  12:15-13:30   [无活动]           1h 15m    休息 💤         │  │
│  │  13:30-15:20   Cursor             1h 50m    主力 ✓ 🔥      │  │
│  │  ...                                                       │  │
│  │                                                            │  │
│  │  [导出当日数据 CSV]                                         │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  📝 备注 (可选)                                             │  │
│  │  ┌───────────────────────────────────────────────────────┐│  │
│  │  │ 今天上午开会比较多，下午效率很高                         ││  │
│  │  └───────────────────────────────────────────────────────┘│  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 包含功能
- G1-G2：时间线和会话详情
- G6：事件标记/备注
- G10：数据导出
- B3-B5：工作开始/结束/午休时间

---

### ⚙️ Tab 5：设置 (Settings)

> 💡 目标：集中管理所有配置项

#### 布局设计

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚙️ 设置                                                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 左侧导航 ─┐  ┌─ 右侧内容区 ────────────────────────────────┐ │
│  │            │  │                                            │ │
│  │  主力应用   │  │  🎯 主力应用管理                            │ │
│  │  ─────────│  │                                            │ │
│  │  目标设置  │  │  这些应用会被计入"专注时长"                  │ │
│  │  ─────────│  │                                            │ │
│  │  闲置设置  │  │  ┌─ 已选主力应用 ──────────────────────┐    │ │
│  │  ─────────│  │  │                                    │    │ │
│  │  通知设置  │  │  │  ☑ Cursor                          │    │ │
│  │  ─────────│  │  │  ☑ VS Code                         │    │ │
│  │  数据管理  │  │  │  ☑ Figma                           │    │ │
│  │  ─────────│  │  │  ▼ ☑ Chrome                        │    │ │
│  │  外观主题  │  │  │      ☑ github.com                  │    │ │
│  │  ─────────│  │  │      ☑ stackoverflow.com           │    │ │
│  │  关于      │  │  │      ☐ youtube.com                 │    │ │
│  │            │  │  │      ☑ 其他域名                    │    │ │
│  │            │  │  │  ☑ Safari                         │    │ │
│  │            │  │  │      ...                           │    │ │
│  │            │  │  └────────────────────────────────────┘    │ │
│  │            │  │                                            │ │
│  │            │  │  ┌─ 可添加的应用 ─────────────────────┐    │ │
│  │            │  │  │  (今日使用过但未标记为主力的)       │    │ │
│  │            │  │  │                                    │    │ │
│  │            │  │  │  ☐ 微信       (使用 1h 40m)         │    │ │
│  │            │  │  │  ☐ Slack     (使用 45m)            │    │ │
│  │            │  │  │  ☐ 邮件       (使用 1h 10m)         │    │ │
│  │            │  │  │  ☐ Notion    (使用 2h 50m)         │    │ │
│  │            │  │  └────────────────────────────────────┘    │ │
│  │            │  │                                            │ │
│  └────────────┘  └────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 设置分类详情

**1. 主力应用管理 (H1-H2)**
- 应用选择列表
- 浏览器域名展开选择
- 应用分类标签 (H3)

**2. 目标设置 (H4)**
- 每日专注目标（小时数）
- 每周目标
- 目标提醒开关

**3. 闲置设置 (H8)**
- 闲置阈值（默认 5 分钟）
- 是否计入睡眠时间

**4. 工作时间 (H9)**
- 工作日选择（默认周一至周五）
- 工作时段（默认 9:00-18:00）
- 用于区分工作时间专注率

**5. 通知设置 (H5)**
- 目标达成提醒
- 久坐提醒（每隔 X 分钟）
- 每日报告推送

**6. 数据管理 (H6)**
- 导出数据（CSV/JSON）
- 清除数据
- 备份/恢复（未来：iCloud）

**7. 外观主题 (H10)**
- 深色/浅色模式
- 跟随系统

---

## 五、窗口规格

### 5.1 窗口尺寸

| 属性 | 值 | 说明 |
|------|-----|------|
| 最小宽度 | 900px | 保证内容不挤压 |
| 最小高度 | 600px | 保证图表可见 |
| 默认尺寸 | 1100×700px | 舒适阅读 |
| 可调整大小 | ✅ | 支持拖拽调整 |

### 5.2 打开方式

1. **菜单栏弹窗中的入口**：添加"打开数据看板"按钮
2. **右键菜单**：添加"数据看板"选项
3. **快捷键**：⌘⇧D 快速打开

---

## 六、数据需求（开发参考）

### 6.1 需要新增计算的指标

| 指标 | 计算方式 | 数据源 |
|------|---------|--------|
| 应用切换次数 | count(sessions) - 1 | AppUsageSession |
| 被打断次数 | 主力→非主力→主力 的切换 | sessions 序列分析 |
| 最长连续专注 | 连续主力 session 累加时长的 max | sessions |
| 平均专注时长 | 主力 session 总时长 / 次数 | sessions |
| 工作开始时间 | 当天第一个 session 的 startTime | sessions |
| 周几效率 | 按 weekday 分组的平均专注时长 | sessions |

### 6.2 需要新增存储

| 数据 | 存储方式 | 说明 |
|------|---------|------|
| 日目标 | UserDefaults | dailyGoal: TimeInterval |
| 备注 | JSON 文件 | { "2026-01-17": "开会多" } |
| 应用分类 | UserDefaults | appCategories: [String: String] |

---

## 七、优先级规划

### MVP (第一版)

| 优先级 | 功能             | Tab   |
| --- | -------------- | ----- |
| P0  | 今日核心指标 (A1-A5) | 总览    |
| P0  | 24 小时分布图 (B1)  | 总览    |
| P0  | 7 天趋势柱状图 (C1)  | 总览/趋势 |
| P0  | 应用排行榜 (D1)     | 排行    |
| P0  | 主力应用管理 (H1-H2) | 设置    |
| P1  | 打断分析 (E1-E3)   | 总览    |
| P1  | 时间线视图 (G1)     | 详情    |
| P1  | 目标设置 (F1-F3)   | 总览/设置 |

### V2 (第二版)

| 优先级 | 功能             | Tab |
| --- | -------------- | --- |
| P2  | 时段热力图 (B2)     | 趋势  |
| P2  | 月/年趋势 (C2-C4)  | 趋势  |
| P2  | 域名排行 (D3)      | 排行  |
| P2  | 应用变化追踪 (D6-D9) | 排行  |
| P2  | 会话列表 (G2)      | 详情  |

### V3 (未来)

| 优先级 | 功能             | 说明   |
| --- | -------------- | ---- |
| P3  | 成就系统 (F7-F8)   | 游戏化  |
| P3  | 数据导出 (G10)     | 企业需求 |
| P3  | iCloud 同步 (H6) | 多设备  |
| P3  | 年度报告 (F10)     | 仪式感  |

---

## 八、技术实现建议

### 8.1 窗口架构

```swift
// 主窗口控制器
class DashboardWindowController: NSWindowController {
    // 独立窗口，不依赖 Popover
}

// 主视图
struct DashboardView: View {
    @State private var selectedTab: DashboardTab = .overview
    
    var body: some View {
        TabView(selection: $selectedTab) {
            OverviewTab().tag(.overview)
            TrendsTab().tag(.trends)
            RankingsTab().tag(.rankings)
            DetailsTab().tag(.details)
            SettingsTab().tag(.settings)
        }
    }
}
```

### 8.2 图表库选择

推荐：**Swift Charts** (iOS 16+ / macOS 13+)
- 原生支持，无需第三方依赖
- 支持柱状图、折线图、热力图
- 动画流畅

### 8.3 数据查询优化

```swift
extension AppUsageManager {
    // 新增的查询方法
    func getAppSwitchCount(for date: Date) -> Int
    func getInterruptionCount(for date: Date) -> Int
    func getLongestFocusStreak(for date: Date) -> TimeInterval
    func getWeekdayAverages() -> [Int: TimeInterval]
    func getHourlyDistribution(for date: Date) -> [Int: TimeInterval]
}
```

---

## 九、总结

本 PRD 规划了一个功能丰富的数据看板，包含：

- **60+ 个功能点**，覆盖 8 大类别
- **5 个 Tab**，逻辑清晰的分类
- **详细的 UI 布局**，可直接参考设计
- **清晰的优先级**，支持 MVP 快速上线

核心价值：让用户从"看数字"升级为"看懂自己的工作模式"。

---

> 📝 下一步：讨论确认功能范围 → 设计高保真原型 → 开发实现
